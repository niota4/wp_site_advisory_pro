jQuery(document).ready(function(n){var o={init:function(){this.bindEvents(),this.loadInitialData()},bindEvents:function(){n(document).on("click",".wsa-dashboard-card .button-primary",this.handleFeatureAction),n("#run-optimizer, #analyze-content, #generate-predictions, #run-pagespeed, #generate-report").on("click",this.handleFeatureAction),setInterval(this.refreshStatuses,3e4)},handleFeatureAction:function(t){t.preventDefault();var e=n(this),t=e.data("feature");t&&window.wsaAIDashboard&&(e.prop("disabled",!0).text(window.wsaAIDashboard.strings.analyzing),n.ajax({url:window.wsaAIDashboard.ajaxurl,type:"POST",data:{action:"wsa_run_ai_analysis",feature:t,nonce:window.wsaAIDashboard.nonce},success:function(t){t.success?o.showSuccess(e,t.data):o.showError(e,t.data||window.wsaAIDashboard.strings.error)},error:function(t,a,s){o.showError(e,window.wsaAIDashboard.strings.error+": "+s)},complete:function(){setTimeout(function(){o.resetButton(e)},2e3)}}))},showSuccess:function(t,a){t.removeClass("button-primary").addClass("button-secondary").text(window.wsaAIDashboard.strings.complete),"test-ajax"===t.attr("id")?n("#test-results").html('<div style="color: green; font-weight: bold;">✓ '+JSON.stringify(a)+"</div>"):(this.showNotification("Analysis completed successfully!","success"),this.refreshStatuses())},showError:function(t,a){t.removeClass("button-primary").addClass("button-secondary").text("Error"),"test-ajax"===t.attr("id")?n("#test-results").html('<div style="color: red; font-weight: bold;">✗ Error: '+a+"</div>"):this.showNotification(a,"error")},resetButton:function(t){var a=t.data("original-text")||"Run Analysis";t.prop("disabled",!1).removeClass("button-secondary").addClass("button-primary").text(a)},showNotification:function(t,a){var s=n('<div class="notice notice-'+a+' is-dismissible"><p>'+t+"</p></div>");n(".wsa-ai-dashboard h1").after(s),setTimeout(function(){s.fadeOut(function(){n(this).remove()})},5e3)},refreshStatuses:function(){n.ajax({url:window.wsaAIDashboard.ajaxurl,type:"POST",data:{action:"wsa_get_ai_status",nonce:window.wsaAIDashboard.nonce},success:function(t){t.success&&t.data&&o.updateStatuses(t.data)}})},updateStatuses:function(s){Object.keys(s.statuses||{}).forEach(function(t){var a=n("#"+t+"-status");a.length&&a.html(s.statuses[t])}),Object.keys(s.stats||{}).forEach(function(t){var a=n("#"+t);a.length&&a.text(s.stats[t])})},loadInitialData:function(){n(".wsa-dashboard-card .button-primary").each(function(){n(this).data("original-text",n(this).text())}),this.refreshStatuses()}};window.wsaAIDashboard&&window.wsaAIDashboard.debug,o.init()});
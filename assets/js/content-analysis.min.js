jQuery(document).ready(function(e){var i={init:function(){this.bindEvents()},bindEvents:function(){var s;e("#content, #title").on("input",function(){clearTimeout(s),s=setTimeout(i.runAnalysis,2e3)}),e("#wsa-run-analysis").on("click",function(s){s.preventDefault(),i.runAnalysis()})},runAnalysis:function(){var s=window.wsaContentAnalysis.post_id,n=e("#content").val()||"",a=e("#title").val()||"";n||a?(e("#wsa-analysis-results").html("<p>"+window.wsaContentAnalysis.messages.analyzing+"</p>"),e.ajax({url:window.wsaContentAnalysis.ajaxurl,type:"POST",data:{action:"wsa_analyze_content",post_id:s,content:n,title:a,nonce:window.wsaContentAnalysis.nonce},success:function(s){s.success?i.displayResults(s.data):i.showMessage(s.data||window.wsaContentAnalysis.messages.analysis_failed,"error")},error:function(){i.showMessage(window.wsaContentAnalysis.messages.analysis_failed,"error")}})):i.showMessage(window.wsaContentAnalysis.messages.no_content,"warning")},displayResults:function(s){var n='<div class="wsa-analysis-results">';s.seo_score&&(n=(n+='<div class="wsa-score-item"><strong>SEO Score: </strong>')+'<span class="wsa-score wsa-score-'+i.getScoreClass(s.seo_score)+'">'+s.seo_score+"/100</span></div>"),s.readability_score&&(n=(n+='<div class="wsa-score-item"><strong>Readability: </strong>')+'<span class="wsa-score wsa-score-'+i.getScoreClass(s.readability_score)+'">'+s.readability_score+"/100</span></div>"),s.issues&&0<s.issues.length&&(n+='<div class="wsa-issues"><strong>Issues Found:</strong><ul>',s.issues.forEach(function(s){n+='<li class="wsa-issue-'+s.severity+'">'+s.message+"</li>"}),n+="</ul></div>"),s.recommendations&&0<s.recommendations.length&&(n+='<div class="wsa-recommendations"><strong>Recommendations:</strong><ul>',s.recommendations.forEach(function(s){n+="<li>"+s+"</li>"}),n+="</ul></div>"),n+="</div>",e("#wsa-analysis-results").html(n)},getScoreClass:function(s){return 80<=s?"good":60<=s?"average":"poor"},showMessage:function(s,n){n=e('<div class="notice notice-'+n+'"><p>'+s+"</p></div>");e("#wsa-analysis-results").html(n)}};window.wsaContentAnalysis&&window.wsaContentAnalysis.post_id&&i.init()});